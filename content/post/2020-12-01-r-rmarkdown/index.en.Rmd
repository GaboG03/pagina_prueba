---
title: "Scrapping en R"
author: "Gabriel Granda"
date: 2022-06-16T21:13:14-05:00
categories: ["R"]
tags: ["R Markdown", "Web Scrapping", "rvest"]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE)
```

# Web Scrapping.

En esta publicación explicaremos como realizar web scrapping empleando R. Revisaremos las noticias donde aparece Casabaca.  


En primer, lugar es necesario instalar y cargar la siguiente librería: 

```{r, eval=FALSE}
install.packages('rvest')
library(rvest)
```

```{r,echo=FALSE,include= F}
library(rvest)
library(data.table)
```

Para establecer la dirección de la página web identificamos un patrón. Además, con read_html() leemos la página web Google News, luego, extraemos la información de DIV, para nuestro caso en particular, extraemos las noticias relacionadas a préstamos en el Ecuador. 



```{r}
busqueda<- "Casabaca, Ecuador"
news_pag<- "https://news.google.com/"
html_dir<- paste0(news_pag,"search?q=",gsub(" ","+",busqueda),"&hl=es-419&gl=US&ceid=US:es-419")
google_news<- read_html(html_dir)
noticias<-  html_nodes(google_news,".ipQwMb")

not<- html_text(noticias[1:3])
not

```

También vamos a extraer el nombre del periódico de donde proviene la noticia y almacenaremos ambos elementos en un data frame. 

Primero, la clase para poder extraer el nombre es .wEwyrc

```{r}
periodico <-  html_nodes(google_news,".wEwyrc") 
periodico <-  html_text(periodico)
periodico <- periodico[1:3]

Noticia <- data.frame(Fuente =periodico, Titular = not )


data.table(Noticia)

```
